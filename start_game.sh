#!/bin/bash

echo "Запуск игры Match3 MMORPG..."

# Проверяем, задана ли переменная DISPLAY
if [ -z "$DISPLAY" ]; then
    echo "ПРЕДУПРЕЖДЕНИЕ: Переменная DISPLAY не установлена."
    echo "Это может привести к проблемам с отображением GUI."
    echo "Если вы хотите запустить приложение с GUI, убедитесь что:"
    echo "1. Вы запускаете контейнер с параметрами X11-forwarding"
    echo "2. Ваш X-сервер настроен на прием соединений"
    echo ""
fi

# Проверяем существование базы данных и инициализируем её при необходимости
if [ ! -f "match3.db" ]; then
    echo "База данных не найдена. Инициализация..."
    python -c "from db.init_db import init_db; init_db()"
    echo "База данных инициализирована."
else
    echo "Найдена существующая база данных."
fi

echo "Запуск главного модуля..."
# Запуск приложения
python main.py