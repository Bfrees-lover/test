# Match3 MMORPG

## Описание проекта

Match3 MMORPG - это игра в жанре Match-3 с элементами RPG и MMORPG. Игроки сражаются друг против друга или против ботов, составляя комбинации из цветных фишек на игровом поле 8x8. Каждый успешный матч приносит урон противнику и вознаграждение в виде монет.

## Особенности

- Игровая механика Match-3 на поле 8x8
- Система персонажей с параметрами HP, оружием и уровнями
- Экономика с монетами и возможностью покупки предметов в магазине
- Рейтинговая система ELO
- Система боев с таймером (45 секунд на матч)
- Графический интерфейс с использованием pygame

## Архитектура

Проект разделен на несколько модулей:

- `core/` - основная игровая логика (доска, AI, ELO, модели)
- `gui/` - графический интерфейс (меню, доска, персонажи, магазин)
- `db/` - работа с базой данных (SQLAlchemy ORM)
- `server/` - серверная логика (в разработке)

## Запуск

### Локальный запуск
```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск игры
python main.py
```

### Запуск в Docker

#### На Linux:
```bash
# Запуск X-сервера для X11-forwarding (если еще не запущен)
export DISPLAY=:0

# Запуск приложения в Docker
docker-compose up --build
```

#### На macOS:
Сначала установите XQuartz и включите "Allow connections from network clients" в настройках.
```bash
# Установка IP для X11-forwarding
IP=$(ifconfig en0 | grep inet | awk '$1=="inet" {print $2}')
export DISPLAY=$IP:0

# Запуск приложения в Docker
docker-compose up --build
```

#### На Windows:
Используйте WSL2 с X-сервером (например, VcXsrv или Xming).

### Разработка в Docker

Для разработки с возможностью изменения кода "на лету":
```bash
# Запуск контейнера с монтированием исходного кода
docker-compose -f docker-compose.dev.yml up --build

# В отдельном терминале подключение к контейнеру
docker exec -it match3_mmo_dev bash

# Запуск игры внутри контейнера
./start_game.sh
```

Также можно использовать Makefile для управления проектом:
```bash
# Сборка проекта
make build

# Запуск проекта
make run

# Просмотр логов
make logs

# Остановка проекта
make stop
```

## Технологии

- Python 3.11+
- Pygame для графики
- SQLAlchemy для работы с базой данных
- SQLite для хранения данных
- Docker для контейнеризации
- Docker Compose для orchestration
- Make для автоматизации задач

## Управление

- Клик мышью по соседним фишкам для обмена
- Клавиша 'A' для открытия магазина
- Клавиша 'M' для возврата в главное меню